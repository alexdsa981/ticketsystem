<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:insert="~{common/imports :: headImports}">
</head>
<body>
<div th:replace="~{common/header :: header}">
    <!--si se usa th:insert, este se colocará dentro de este div-->
</div>
<main class="container">


    <div>
        <h2>ADMIN: Gestión de Clasificadores</h2>
    </div>

    <div class="container border shadow p-3 px-4 mb-1 bg-body rounded contenedor-clasificadores" >
        <div class="d-flex align-items-center gap-3">
            <h5 class="mb-0">SELECCIONE UN CLASIFICADOR:</h5>
            <select id="selectorClasificador" class="form-select w-auto">
                <option value="Incidencia" th:selected="${clasificadorActivo == 'Incidencia'}">Incidencia</option>
                <option value="Area" th:selected="${clasificadorActivo == 'Area'}">Area</option>
                <option value="Atencion" th:selected="${clasificadorActivo == 'Atencion'}">Atencion</option>
                <option value="Desestimacion" th:selected="${clasificadorActivo == 'Desestimacion'}">Desestimacion</option>
                <option value="Espera" th:selected="${clasificadorActivo == 'Espera'}">Espera</option>
            </select>
        </div>
    </div>

    <script>
        document.getElementById("selectorClasificador").addEventListener("change", function () {
            const tipo = this.value;
            window.location.href = `/admin/Clasificadores?clasificador=${tipo}`;
        });
    </script>



    <div class="container border shadow p-3 px-4 mb-5 bg-body rounded contenedor-clasificadores" th:if="${clasificadorActivo =='Incidencia'}">
        <div class="row mb-3">
            <div class="col-md-6">
                <label for="selectCategoriaIncidencia" class="form-label">Categoría Incidencia</label>
                <select id="selectCategoriaIncidencia" name="categoriaId" class="form-select">
                    <option value="" disabled selected>Seleccione una categoría</option>
                    <option th:each="cat : ${catIncidencias}"
                            th:value="${cat.id}"
                            th:text="${cat.nombre}"
                            th:selected="${cat.id.toString() == categoriaSeleccionada}"></option>

                </select>
            </div>
            <div class="col-md-6">
                <label for="selectSubCategoriaIncidencia" class="form-label">Subcategoría Incidencia</label>
                <select id="selectSubCategoriaIncidencia" name="subCategoriaId" class="form-select"
                        th:disabled="${categoriaSeleccionada == null}">
                    <option value="" disabled selected>Seleccione una subcategoría</option>
                    <option th:each="sub : ${subCatIncidencias}"
                            th:value="${sub.id}"
                            th:text="${sub.nombre}"
                            th:selected="${sub.id.toString() == subcategoriaSeleccionada}"></option>
                </select>
            </div>
        </div>
        <script>
            document.addEventListener("DOMContentLoaded", function () {
                const selectCategoria = document.getElementById("selectCategoriaIncidencia");
                const selectSubCategoria = document.getElementById("selectSubCategoriaIncidencia");

                const catSeleccionada = /*[[${categoriaSeleccionada}]]*/ '';
                if (catSeleccionada !== '') {
                    selectCategoria.value = catSeleccionada;
                }

                selectCategoria.addEventListener("change", function () {
                    const categoriaId = this.value;
                    const newUrl = `${window.location.origin}${window.location.pathname}?clasificador=Incidencia&categoria=${categoriaId}`;
                    window.location.href = newUrl;
                });

                selectSubCategoria.addEventListener("change", function () {
                    const categoriaId = selectCategoria.value;
                    const subcategoriaId = this.value;
                    const newUrl = `${window.location.origin}${window.location.pathname}?clasificador=Incidencia&categoria=${categoriaId}&subcategoria=${subcategoriaId}`;
                    window.location.href = newUrl;
                });
            });
        </script>





        <!-- Clasificadores Categoria -->
        <div class="card shadow-sm">
            <div class="card-header d-flex justify-content-between align-items-center bg-light text-dark">
                <h5 class="mb-0">Categorias Incidencia</h5>
                <button type="button" class="btn btn-dark btn-sm" data-bs-toggle="modal"
                        data-bs-target="#newCatIncidenciaModal">
                    <i class="bi bi-plus-lg"></i> Nuevo
                </button>
            </div>
            <div class="card-body p-0">
                <table class="table table-hover table-bordered text-center mb-0">
                    <thead class="table-dark">
                    <tr>
                        <th>N°</th>
                        <th>Nombre Categoria</th>
                        <th>Estado</th>
                        <th>Acciones</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="clasificador, iter: ${catIncidencias}"
                        th:classappend="${!clasificador.isActive} ? 'row-desactivado' : ''">
                        <td th:text="${iter.count}">#</td>
                        <td th:text="${clasificador.nombre}">Nombre</td>
                        <td th:text="${clasificador.isActive ? 'Activo' : 'Desactivado'}">Estado</td>
                        <td class="d-flex gap-1 flex-wrap">
                            <button type="button" class="btn btn-primary btn-sm"
                                    data-bs-toggle="modal" data-bs-target="#editCatIncidenciaModal"
                                    th:data-catIncidencias-id="${clasificador.id}"
                                    th:data-catIncidencias-nombre="${clasificador.nombre}"
                                    onclick="openCatIncidenciasModal(this)">
                                Editar
                            </button>
                            <th:block th:if="${clasificador.isActive}">
                                <a class="btn btn-danger btn-sm"
                                   th:href="@{'/app/clasificadores/desactivar/catIncidencia/' + ${clasificador.id}}"
                                   onclick="return confirmAction(this.href, '¿Estás seguro de desactivar esta Categoria Incidencia?');">
                                    Desactivar
                                </a>
                            </th:block>
                            <th:block th:if="${!clasificador.isActive}">
                                <a class="btn btn-success btn-sm"
                                   th:href="@{'/app/clasificadores/activar/catIncidencia/' + ${clasificador.id}}"
                                   onclick="return confirmAction(this.href, '¿Estás seguro de activar esta Categoria Incidencia?');">
                                    Activar
                                </a>
                            </th:block>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>


        <!-- Clasificadores SUBCATIncidencia -->
        <div class="card shadow-sm" th:if="${clasificadorActivo == 'Incidencia' and categoriaSeleccionada != null}" style="margin-top:20px;">
            <div class="card-header d-flex justify-content-between align-items-center bg-light text-dark">
                <h5 class="mb-0">Subcategorias: <span id="categoriaSeleccionada"></span></h5>
                <button type="button" class="btn btn-dark btn-sm" data-bs-toggle="modal"
                        data-bs-target="#newSubCatIncidenciaModal">
                    <i class="bi bi-plus-lg"></i> Nuevo
                </button>
            </div>
            <div class="card-body p-0">
                <table class="table table-hover table-bordered text-center mb-0">
                    <thead class="table-dark">
                    <tr>
                        <th>N°</th>
                        <th>Nombre SubCategoria</th>
                        <th>Estado</th>
                        <th>Acciones</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="clasificador, iter: ${subCatIncidencias}"
                        th:classappend="${!clasificador.isActive} ? 'row-desactivado' : ''">
                        <td th:text="${iter.count}">#</td>
                        <td th:text="${clasificador.nombre}">Nombre</td>
                        <td th:text="${clasificador.isActive ? 'Activo' : 'Desactivado'}">Estado</td>
                        <td class="d-flex gap-1 flex-wrap">
                            <button type="button" class="btn btn-primary btn-sm"
                                    data-bs-toggle="modal" data-bs-target="#editSubCatIncidenciaModal"
                                    th:data-subCatIncidencia-id="${clasificador.id}"
                                    th:data-subCatIncidencia-nombre="${clasificador.nombre}"
                                    th:data-CatIncidencia-id="${clasificador.categoriaIncidencia.id}"
                                    onclick="openSubCatIncidenciaModal(this)">
                                Editar
                            </button>
                            <th:block th:if="${clasificador.isActive}">
                                <a class="btn btn-danger btn-sm"
                                   th:href="@{'/app/clasificadores/desactivar/subCatIncidencia/' + ${clasificador.id}}"
                                   onclick="return confirmAction(this.href, '¿Estás seguro de desactivar esta Sub Categoria Incidencia?');">
                                    Desactivar
                                </a>
                            </th:block>
                            <th:block th:if="${!clasificador.isActive}">
                                <a class="btn btn-success btn-sm"
                                   th:href="@{'/app/clasificadores/activar/subCatIncidencia/' + ${clasificador.id}}"
                                   onclick="return confirmAction(this.href, '¿Estás seguro de activar esta Sub Categoria Incidencia?');">
                                    Activar
                                </a>
                            </th:block>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>


        <!-- TIPO Incidencia -->
        <div class="card shadow-sm" th:if="${clasificadorActivo == 'Incidencia' and categoriaSeleccionada != null and subcategoriaSeleccionada != null}" style="margin-top:20px;">
            <div class="card-header d-flex justify-content-between align-items-center bg-light text-dark">
                <h5 class="mb-0">Incidencias: <span id="subcategoriaSeleccionada"></span></h5>
                <button type="button" class="btn btn-dark btn-sm" data-bs-toggle="modal"
                        data-bs-target="#newIncidenciaModal">
                    <i class="bi bi-plus-lg"></i> Nuevo
                </button>
            </div>
            <div class="card-body p-0">
                <table class="table table-hover table-bordered text-center mb-0">
                    <thead class="table-dark">
                    <tr>
                        <th>N°</th>
                        <th>Nombre Incidencia</th>
                        <th>Estado</th>
                        <th>Acciones</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="clasificador, iter: ${tipoIncidencias}"
                        th:classappend="${!clasificador.isActive} ? 'row-desactivado' : ''">
                        <td th:text="${iter.count}">#</td>
                        <td th:text="${clasificador.nombre}">Nombre</td>
                        <td th:text="${clasificador.isActive ? 'Activo' : 'Desactivado'}">Estado</td>
                        <td class="d-flex gap-1 flex-wrap">
                            <button type="button" class="btn btn-primary btn-sm"
                                    data-bs-toggle="modal" data-bs-target="#incidenciaModal"
                                    th:data-incidencia-id="${clasificador.id}"
                                    th:data-incidencia-nombre="${clasificador.nombre}"
                                    th:data-subCatIncidencia-id="${clasificador.subCategoriaIncidencia.id}"
                                    onclick="openIncidenciaModal(this)">
                                Editar
                            </button>
                            <th:block th:if="${clasificador.isActive}">
                                <a class="btn btn-danger btn-sm"
                                   th:href="@{'/app/clasificadores/desactivar/tipoIncidencia/' + ${clasificador.id}}"
                                   onclick="return confirmAction(this.href, '¿Estás seguro de desactivar esta Incidencia?');">
                                    Desactivar
                                </a>
                            </th:block>
                            <th:block th:if="${!clasificador.isActive}">
                                <a class="btn btn-success btn-sm"
                                   th:href="@{'/app/clasificadores/activar/tipoIncidencia/' + ${clasificador.id}}"
                                   onclick="return confirmAction(this.href, '¿Estás seguro de activar esta Incidencia?');">
                                    Activar
                                </a>
                            </th:block>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>




    <div class="container border shadow p-3 px-4 mb-5 bg-body rounded contenedor-clasificadores" th:if="${clasificadorActivo == 'Atencion'}">
        <!-- Clasificadores Atencion -->
        <div class="card shadow-sm">
            <div class="card-header d-flex justify-content-between align-items-center bg-light text-dark">
                <h5 class="mb-0">Clasificadores Atención</h5>
                <button type="button" class="btn btn-dark btn-sm" data-bs-toggle="modal"
                        data-bs-target="#newAtencionModal">
                    <i class="bi bi-plus-lg"></i> Nuevo
                </button>
            </div>
            <div class="card-body p-0">
                <table class="table table-hover table-bordered text-center mb-0">
                    <thead class="table-dark">
                    <tr>
                        <th>N°</th>
                        <th>Nombre Atencion</th>
                        <th>Estado</th>
                        <th>Acciones</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="clasificador, iter: ${atenciones}"
                        th:classappend="${!clasificador.isActive} ? 'row-desactivado' : ''">
                        <td th:text="${iter.count}">#</td>
                        <td th:text="${clasificador.nombre}">Nombre</td>
                        <td th:text="${clasificador.isActive ? 'Activo' : 'Desactivado'}">Estado</td>
                        <td class="d-flex gap-1 flex-wrap">
                            <button class="btn btn-primary btn-sm"
                                    data-bs-toggle="modal" data-bs-target="#atencionModal"
                                    th:data-atencion-id="${clasificador.id}"
                                    th:data-atencion-nombre="${clasificador.nombre}"
                                    onclick="openAtencionModal(this)">
                                Editar
                            </button>
                            <th:block th:if="${clasificador.isActive}">
                                <a class="btn btn-danger btn-sm"
                                   th:href="@{'/app/clasificadores/desactivar/atencion/' + ${clasificador.id}}"
                                   onclick="return confirmAction(this.href, '¿Estás seguro de desactivar este Atencion?');">
                                    Desactivar
                                </a>
                            </th:block>
                            <th:block th:if="${!clasificador.isActive}">
                                <a class="btn btn-success btn-sm"
                                   th:href="@{'/app/clasificadores/activar/atencion/' + ${clasificador.id}}"
                                   onclick="return confirmAction(this.href, '¿Estás seguro de activar este Atencion?');">
                                    Activar
                                </a>
                            </th:block>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>


    <div class="container border shadow p-3 px-4 mb-5 bg-body rounded contenedor-clasificadores" th:if="${clasificadorActivo == 'Desestimacion'}">
        <!-- Clasificadores Desestimación -->
        <div class="card shadow-sm">
            <div class="card-header d-flex justify-content-between align-items-center bg-light text-dark">
                <h5 class="mb-0">Clasificadores Desestimación</h5>
                <button type="button" class="btn btn-dark btn-sm" data-bs-toggle="modal"
                        data-bs-target="#newDesestimacionModal">
                    <i class="bi bi-plus-lg"></i> Nuevo
                </button>
            </div>
            <div class="card-body p-0">
                <table class="table table-hover table-bordered text-center mb-0">
                    <thead class="table-dark">
                    <tr>
                        <th>N°</th>
                        <th>Nombre Desestimación</th>
                        <th>Estado</th>
                        <th>Acciones</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="clasificador, iter: ${desestimaciones}"
                        th:classappend="${!clasificador.isActive} ? 'row-desactivado' : ''">
                        <td th:text="${iter.count}">#</td>
                        <td th:text="${clasificador.nombre}">Nombre</td>
                        <td th:text="${clasificador.isActive ? 'Activo' : 'Desactivado'}">Estado</td>
                        <td class="d-flex gap-1 flex-wrap">
                            <button class="btn btn-primary btn-sm"
                                    data-bs-toggle="modal" data-bs-target="#desestimacionModal"
                                    th:data-desestimacion-id="${clasificador.id}"
                                    th:data-desestimacion-nombre="${clasificador.nombre}"
                                    onclick="openDesestimacionModal(this)">
                                Editar
                            </button>
                            <th:block th:if="${clasificador.isActive}">
                                <a class="btn btn-danger btn-sm"
                                   th:href="@{'/app/clasificadores/desactivar/desestimacion/' + ${clasificador.id}}"
                                   onclick="return confirmAction(this.href, '¿Estás seguro de desactivar esta Desestimación?');">
                                    Desactivar
                                </a>
                            </th:block>
                            <th:block th:if="${!clasificador.isActive}">
                                <a class="btn btn-success btn-sm"
                                   th:href="@{'/app/clasificadores/activar/desestimacion/' + ${clasificador.id}}"
                                   onclick="return confirmAction(this.href, '¿Estás seguro de activar esta Desestimación?');">
                                    Activar
                                </a>
                            </th:block>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>


    <div class="container border shadow p-3 px-4 mb-5 bg-body rounded contenedor-clasificadores" th:if="${clasificadorActivo == 'Espera'}">
        <!-- Clasificadores Espera -->
        <div class="card shadow-sm">
            <div class="card-header d-flex justify-content-between align-items-center bg-light text-dark">
                <h5 class="mb-0">Clasificadores Espera</h5>
                <button type="button" class="btn btn-dark btn-sm" data-bs-toggle="modal"
                        data-bs-target="#newEsperaModal">
                    <i class="bi bi-plus-lg"></i> Nuevo
                </button>
            </div>
            <div class="card-body p-0">
                <table class="table table-hover table-bordered text-center mb-0">
                    <thead class="table-dark">
                    <tr>
                        <th>N°</th>
                        <th>Nombre Espera</th>
                        <th>Estado</th>
                        <th>Acciones</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="clasificador, iter: ${esperas}"
                        th:classappend="${!clasificador.isActive} ? 'row-desactivado' : ''">
                        <td th:text="${iter.count}">#</td>
                        <td th:text="${clasificador.nombre}">Nombre</td>
                        <td th:text="${clasificador.isActive ? 'Activo' : 'Desactivado'}">Estado</td>
                        <td class="d-flex gap-1 flex-wrap">
                            <button class="btn btn-primary btn-sm"
                                    data-bs-toggle="modal" data-bs-target="#esperaModal"
                                    th:data-espera-id="${clasificador.id}"
                                    th:data-espera-nombre="${clasificador.nombre}"
                                    onclick="openEsperaModal(this)">
                                Editar
                            </button>
                            <th:block th:if="${clasificador.isActive}">
                                <a class="btn btn-danger btn-sm"
                                   th:href="@{'/app/clasificadores/desactivar/espera/' + ${clasificador.id}}"
                                   onclick="return confirmAction(this.href, '¿Estás seguro de desactivar esta Espera?');">
                                    Desactivar
                                </a>
                            </th:block>
                            <th:block th:if="${!clasificador.isActive}">
                                <a class="btn btn-success btn-sm"
                                   th:href="@{'/app/clasificadores/activar/espera/' + ${clasificador.id}}"
                                   onclick="return confirmAction(this.href, '¿Estás seguro de activar esta Espera?');">
                                    Activar
                                </a>
                            </th:block>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="card shadow-sm" style="margin-top:10px">
            <div class="card-header bg-light text-dark">
                <h6 class="mb-0">Horario de Atención</h6>
            </div>
            <div class="card-body">
                <div class="mb-3">
                    <strong>Último horario establecido:</strong>
                    <span th:text="${ultimoHorarioAtencion != null ? #temporals.format(ultimoHorarioAtencion.horaEntrada, 'HH:mm') + ' - ' + #temporals.format(ultimoHorarioAtencion.horaSalida, 'HH:mm') : 'No establecido'}"></span>
                </div>
                <form th:action="@{/app/clasificadores/horarioAtencion/nuevo}" method="post" class="row g-2 align-items-end">
                    <div class="col-md-5">
                        <label for="horaEntrada" class="form-label">Hora de entrada</label>
                        <input type="time" class="form-control" id="horaEntrada" name="horaEntrada" required>
                    </div>
                    <div class="col-md-5">
                        <label for="horaSalida" class="form-label">Hora de salida</label>
                        <input type="time" class="form-control" id="horaSalida" name="horaSalida" required>
                    </div>
                    <div class="col-md-2">
                        <button type="submit" class="btn btn-success w-100">
                            Establecer
                        </button>
                    </div>
                    <div th:if="${param.error}" class="alert alert-danger alert-dismissible fade show" role="alert">
                        <span th:text="${param.error}">Error</span>
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>

                </form>
            </div>
        </div>
    </div>





    <div class="container border shadow p-3 px-4 mb-5 bg-body rounded contenedor-clasificadores" th:if="${clasificadorActivo == 'Area'}">
        <div class="my-3">
            <select id="selectSede" class="form-select">
                <option value="" th:selected="${sedeSeleccionada == null or sedeSeleccionada == ''}" disabled>Seleccione una Sede</option>
                <option th:each="sede : ${sedes}"
                        th:value="${sede.id}"
                        th:text="${sede.nombre}"
                        th:selected="${sedeSeleccionada != null and sedeSeleccionada != '' and sede.id == T(java.lang.Long).valueOf(sedeSeleccionada)}">
                </option>
            </select>
        </div>

        <!-- Clasificadores Sede -->
        <div class="card shadow-sm">
            <div class="card-header d-flex justify-content-between align-items-center bg-light text-dark">
                <h5 class="mb-0">Sedes</h5>
                <button type="button" class="btn btn-dark btn-sm" data-bs-toggle="modal" data-bs-target="#newSedeModal">
                    <i class="bi bi-plus-lg"></i> Nuevo
                </button>
            </div>
            <div class="card-body p-0">
                <table class="table table-hover table-bordered text-center mb-0">
                    <thead class="table-dark">
                    <tr>
                        <th>N°</th>
                        <th>Nombre Sede</th>
                        <th>Estado</th>
                        <th>Acciones</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="clasificador, iter: ${sedes}"
                        th:classappend="${!clasificador.isActive} ? 'row-desactivado' : ''">
                        <td th:text="${iter.count}">#</td>
                        <td th:text="${clasificador.nombre}">Nombre</td>
                        <td th:text="${clasificador.isActive ? 'Activo' : 'Desactivado'}">Estado</td>
                        <td class="d-flex gap-1 flex-wrap">
                            <button class="btn btn-primary btn-sm"
                                    data-bs-toggle="modal" data-bs-target="#sedeModal"
                                    th:data-sede-id="${clasificador.id}"
                                    th:data-sede-nombre="${clasificador.nombre}"
                                    onclick="openSedeModal(this)">
                                Editar
                            </button>
                            <th:block th:if="${clasificador.isActive}">
                                <a class="btn btn-danger btn-sm"
                                   th:href="@{'/app/clasificadores/desactivar/sede/' + ${clasificador.id}}"
                                   onclick="return confirmAction(this.href, '¿Estás seguro de desactivar esta Sede?');">
                                    Desactivar
                                </a>
                            </th:block>
                            <th:block th:if="${!clasificador.isActive}">
                                <a class="btn btn-success btn-sm"
                                   th:href="@{'/app/clasificadores/activar/sede/' + ${clasificador.id}}"
                                   onclick="return confirmAction(this.href, '¿Estás seguro de activar esta Área?');">
                                    Activar
                                </a>
                            </th:block>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>


        <!-- Clasificadores Área (solo si se ha seleccionado una sede) -->
        <div th:if="${sedeSeleccionada != null and sedeSeleccionada != ''}" class="card shadow-sm" style="margin-top:20px;">
            <div class="card-header d-flex justify-content-between align-items-center bg-light text-dark">
                <h5 class="mb-0">Áreas: <span id="sedeSeleccionadaTexto"></span></h5>
                <button type="button" class="btn btn-dark btn-sm" data-bs-toggle="modal" data-bs-target="#newAreaModal">
                    <i class="bi bi-plus-lg"></i> Nuevo
                </button>
            </div>
            <div class="card-body p-0">
                <table class="table table-hover table-bordered text-center mb-0">
                    <thead class="table-dark">
                    <tr>
                        <th>N°</th>
                        <th>Nombre Área</th>
                        <th>Estado</th>
                        <th>Acciones</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="clasificador, iter: ${areas}"
                        th:classappend="${!clasificador.isActive} ? 'row-desactivado' : ''">
                        <td th:text="${iter.count}">#</td>
                        <td th:text="${clasificador.nombre}">Nombre</td>
                        <td th:text="${clasificador.isActive ? 'Activo' : 'Desactivado'}">Estado</td>
                        <td class="d-flex gap-1 flex-wrap">
                            <button class="btn btn-primary btn-sm"
                                    data-bs-toggle="modal" data-bs-target="#areaModal"
                                    th:data-area-id="${clasificador.id}"
                                    th:data-area-sede-id="${clasificador.sede.id}"
                                    th:data-area-nombre="${clasificador.nombre}"
                                    onclick="openAreaModal(this)">
                                Editar
                            </button>
                            <th:block th:if="${clasificador.isActive}">
                                <a class="btn btn-danger btn-sm"
                                   th:href="@{'/app/clasificadores/desactivar/area/' + ${clasificador.id}}"
                                   onclick="return confirmAction(this.href, '¿Estás seguro de desactivar esta Área?');">
                                    Desactivar
                                </a>
                            </th:block>
                            <th:block th:if="${!clasificador.isActive}">
                                <a class="btn btn-success btn-sm"
                                   th:href="@{'/app/clasificadores/activar/area/' + ${clasificador.id}}"
                                   onclick="return confirmAction(this.href, '¿Estás seguro de activar esta Área?');">
                                    Activar
                                </a>
                            </th:block>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>


    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const selectSede = document.getElementById("selectSede");

            if (selectSede) {
                const sedeSeleccionada = /*[[${sedeSeleccionada}]]*/ '';

                if (sedeSeleccionada !== '') {
                    selectSede.value = sedeSeleccionada;
                }

                selectSede.addEventListener("change", function () {
                    const sedeId = this.value;
                    const urlParams = new URLSearchParams(window.location.search);
                    urlParams.set('clasificador', 'Area');
                    if (sedeId) {
                        urlParams.set('sede', sedeId);
                    } else {
                        urlParams.delete('sede');
                    }
                    window.location.search = urlParams.toString();
                });
            }
        });
    </script>








    <!-- Modal CREAR NUEVA CAT INCIDENCIA-->
    <div class="modal fade" id="newCatIncidenciaModal" tabindex="-1" aria-labelledby="newCatIncidenciaModal"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <form action="/app/clasificadores/catIncidencia/nuevo" method="POST" enctype="multipart/form-data" id="formNewCatIncidencia">
                    <div class="modal-header">
                        <h1 class="modal-title fs-5" id="catIncidenciaModalLabel">Nueva Categoria:</h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>

                    <div class="modal-body">
                        <div class="mb-3">
                            <label for="nombreCatIncidencia" class="form-label">Nombre:</label>
                            <input type="text" class="form-control" id="nombreCatIncidencia" name="nombre" required
                                   autocomplete="off">
                        </div>
                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                        <button type="submit" class="btn btn-primary submit-btn">Crear</button>
                    </div>
                </form>

            </div>
        </div>
    </div>


    <!-- Modal para EDITAR CAT INCIDENCIA -->
    <div class="modal fade" id="editCatIncidenciaModal" tabindex="-1" aria-labelledby="editCatIncidenciaModalLabel"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editCatIncidenciaModalLabel">Editar Categoria</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="editCatIncidenciaForm" method="post">
                        <input type="hidden" id="editCatIncidenciaId" name="id"/>
                        <div class="mb-3">
                            <label for="editCatIncidenciaNombre" class="form-label">Nombre:</label>
                            <input type="text" class="form-control" id="editCatIncidenciaNombre" name="nombre" required
                                   autocomplete="off"/>
                        </div>
                        <button type="submit" class="btn btn-primary submit-btn">Guardar cambios</button>
                    </form>
                </div>
            </div>
        </div>
    </div>







    <!-- Modal CREAR NUEVA SUBCAT INCIDENCIA-->
    <div class="modal fade" id="newSubCatIncidenciaModal" tabindex="-1" aria-labelledby="newSubCatIncidenciaModal"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <form action="/app/clasificadores/subCatIncidencia/nuevo" method="POST" enctype="multipart/form-data"  id="formNewSubCatIncidencia">
                    <div class="modal-header">
                        <h1 class="modal-title fs-5" id="SubCatModalLabel">Nueva Subcategoria: <span id="nombreNuevoSubCatIncidenciaEnModal"></span></h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>

                    <div class="modal-body">
                        <div class="mb-3">
                            <label for="nombreSubCatincidencia" class="form-label">Nombre:</label>
                            <input type="text" class="form-control" id="nombreSubCatincidencia" name="nombre" required
                                   autocomplete="off">
                        </div>
                        <input type="hidden" id="inputCategoriaId" name="id_cat">
                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                        <button type="submit" class="btn btn-primary submit-btn">Crear</button>
                    </div>
                </form>

            </div>
        </div>
    </div>


    <!-- Modal para EDITAR SUB CAT INCIDENCIA -->
    <div class="modal fade" id="editSubCatIncidenciaModal" tabindex="-1" aria-labelledby="editSubCatIncidenciaModal"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editSubCatModalLabel">Editar Subcategoria:</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="subCatIncidenciaForm" method="post">
                        <input type="hidden" id="subCatIncidenciaId" name="id"/>
                        <div class="mb-3">
                            <label for="subCatIncidenciaNombre" class="form-label">Nombre:</label>
                            <input type="text" class="form-control" id="subCatIncidenciaNombre" name="nombre" required
                                   autocomplete="off"/>
                        </div>
                        <div class="mb-3">
                            <label for="editSubCatIncidenciaCat" class="form-label">Categoria:</label>
                            <select class="form-select" id="editSubCatIncidenciaCat" name="id_cat" required>
                                <option selected disabled value="">Selecciona la Categoria</option>
                                <option th:each="tipo : ${catIncidencias}" th:value="${tipo.id}"
                                        th:text="${tipo.nombre}"></option>
                            </select>
                        </div>
                        <button type="submit" class="btn btn-primary submit-btn">Guardar cambios</button>
                    </form>
                </div>
            </div>
        </div>
    </div>



    <!-- Modal CREAR NUEVA INCIDENCIA-->
    <div class="modal fade" id="newIncidenciaModal" tabindex="-1" aria-labelledby="newIncidenciaModal"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <form action="/app/clasificadores/tipoIncidencia/nuevo" method="POST" enctype="multipart/form-data" id="formNewTipoIncidencia">
                    <div class="modal-header">
                        <h1 class="modal-title fs-5" id="exampleModalLabel">Nueva Incidencia: <span id="nombreNuevoTipoIncidenciaEnModal"></span></h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>

                    <div class="modal-body">
                        <div class="mb-3">
                            <label for="nombreincidencia" class="form-label">Nombrer:</label>
                            <input type="text" class="form-control" id="nombreincidencia" name="nombre" required
                                   autocomplete="off">
                            <input type="hidden" id="inputSubCategoriaId" name="id_subcat">

                        </div>
                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                        <button type="submit" class="btn btn-primary submit-btn">Crear</button>
                    </div>
                </form>

            </div>
        </div>
    </div>


    <!-- Modal para EDITAR INCIDENCIA -->
    <div class="modal fade" id="incidenciaModal" tabindex="-1" aria-labelledby="incidenciaModalLabel"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="incidenciaModalLabel">Editar Tipo Incidencia:</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="incidenciaForm" method="post">
                        <input type="hidden" id="incidenciaId" name="id"/>
                        <div class="mb-3">
                            <label for="incidenciaNombre" class="form-label">Nombre:</label>
                            <input type="text" class="form-control" id="incidenciaNombre" name="nombre" required
                                   autocomplete="off"/>
                        </div>
                        <div class="mb-3">
                            <label for="editTipoIncidenciaSubCat" class="form-label">Subcategoria:</label>
                            <select class="form-select" id="editTipoIncidenciaSubCat" name="id_subcat" required>
                                <option selected disabled value="">Selecciona la Sub-Categoria</option>
                                <option th:each="tipo : ${subCatIncidencias}" th:value="${tipo.id}"
                                        th:text="${tipo.nombre}"></option>
                            </select>
                        </div>
                        <button type="submit" class="btn btn-primary submit-btn">Guardar cambios</button>
                    </form>
                </div>
            </div>
        </div>
    </div>


    <!--CREAR ATENCION-->
    <div class="modal fade" id="newAtencionModal" tabindex="-1" aria-labelledby="newAtencionModal"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <form action="/app/clasificadores/atencion/nuevo" method="POST" enctype="multipart/form-data">
                    <div class="modal-header">
                        <h1 class="modal-title fs-5" id="newatencionModalLabel">Nueva Clasificacion Atención:</h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>

                    <div class="modal-body">
                        <div class="mb-3">
                            <label for="nombreatencion" class="form-label">Nombre:</label>
                            <input type="text" class="form-control" id="nombreatencion" name="nombre" required
                                   autocomplete="off">
                        </div>
                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                        <button type="submit" class="btn btn-primary submit-btn">Crear</button>
                    </div>
                </form>

            </div>
        </div>
    </div>


    <!--EDITAR ATENCION -->
    <div class="modal fade" id="atencionModal" tabindex="-1" aria-labelledby="atencionModalLabel"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="atencionModalLabel">Editar Clasificador de Atención:</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="atencionForm" method="post">
                        <input type="hidden" id="atencionId" name="id"/>
                        <div class="mb-3">
                            <label for="atencionNombre" class="form-label">Nombre:</label>
                            <input type="text" class="form-control" id="atencionNombre" name="nombre" required
                                   autocomplete="off"/>
                        </div>
                        <button type="submit" class="btn btn-primary submit-btn">Guardar cambios</button>
                    </form>
                </div>
            </div>
        </div>
    </div>


    <!--CREAR DESESTIMACION-->
    <div class="modal fade" id="newDesestimacionModal" tabindex="-1" aria-labelledby="newDesestimacionModal"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <form action="/app/clasificadores/desestimacion/nuevo" method="POST" enctype="multipart/form-data">
                    <div class="modal-header">
                        <h1 class="modal-title fs-5" id="newdesestimacionModalLabel">Nueva Clasificacion de Desestimación:</h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>

                    <div class="modal-body">
                        <div class="mb-3">
                            <label for="nombredesestimacion" class="form-label">Nombre:</label>
                            <input type="text" class="form-control" id="nombredesestimacion" name="nombre" required
                                   autocomplete="off">
                        </div>
                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                        <button type="submit" class="btn btn-primary submit-btn">Crear</button>
                    </div>
                </form>

            </div>
        </div>
    </div>


    <!--EDITAR DESESTIMACION -->
    <div class="modal fade" id="desestimacionModal" tabindex="-1" aria-labelledby="desestimacionModalLabel"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="desestimacionModalLabel">Editar Clasificador de Desestimacion:</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="desestimacionForm" method="post">
                        <input type="hidden" id="desestimacionId" name="id"/>
                        <div class="mb-3">
                            <label for="desestimacionNombre" class="form-label">Nombre:</label>
                            <input type="text" class="form-control" id="desestimacionNombre" name="nombre" required
                                   autocomplete="off"/>
                        </div>
                        <button type="submit" class="btn btn-primary submit-btn">Guardar cambios</button>
                    </form>
                </div>
            </div>
        </div>
    </div>




    <!--CREAR ESPERA-->
    <div class="modal fade" id="newEsperaModal" tabindex="-1" aria-labelledby="newEsperaModal"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <form action="/app/clasificadores/espera/nuevo" method="POST" enctype="multipart/form-data">
                    <div class="modal-header">
                        <h1 class="modal-title fs-5" id="newesperaModalLabel">Nueva Clasificacion de Espera:</h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>

                    <div class="modal-body">
                        <div class="mb-3">
                            <label for="nombreespera" class="form-label">Nombre:</label>
                            <input type="text" class="form-control" id="nombreespera" name="nombre" required
                                   autocomplete="off">
                        </div>
                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                        <button type="submit" class="btn btn-primary submit-btn">Crear</button>
                    </div>
                </form>

            </div>
        </div>
    </div>


    <!--EDITAR ESPERA -->
    <div class="modal fade" id="esperaModal" tabindex="-1" aria-labelledby="esperaModalLabel"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="esperaModalLabel">Editar Clasificador de Espera:</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="esperaForm" method="post">
                        <input type="hidden" id="esperaId" name="id"/>
                        <div class="mb-3">
                            <label for="esperaNombre" class="form-label">Nombre:</label>
                            <input type="text" class="form-control" id="esperaNombre" name="nombre" required
                                   autocomplete="off"/>
                        </div>
                        <button type="submit" class="btn btn-primary submit-btn">Guardar cambios</button>
                    </form>
                </div>
            </div>
        </div>
    </div>






    <!--CREAR SEDE-->
    <div class="modal fade" id="newSedeModal" tabindex="-1" aria-labelledby="newSedeModal"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <form action="/app/clasificadores/sede/nuevo" method="POST" enctype="multipart/form-data">
                    <input type="hidden" name="id_sede">
                    <div class="modal-header">
                        <h1 class="modal-title fs-5" id="newSedeModalLabel">Nueva Clasificación de Sede:</h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>

                    <div class="modal-body">
                        <div class="mb-3">
                            <label for="nombreSede" class="form-label">Nombre:</label>
                            <input type="text" class="form-control" id="nombreSede" name="nombre" required
                                   autocomplete="off">
                        </div>
                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                        <button type="submit" class="btn btn-primary submit-btn">Crear</button>
                    </div>
                </form>

            </div>
        </div>
    </div>

    <!--EDITAR SEDE-->
    <div class="modal fade" id="sedeModal" tabindex="-1" aria-labelledby="sedeModalLabel"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="sedeModalLabel">Editar Clasificación de Sede:</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="sedeForm" method="post">
                        <input type="hidden" name="id_sede">
                        <input type="hidden" id="sedeId" name="id"/>
                        <div class="mb-3">
                            <label for="sedeNombre" class="form-label">Nombre:</label>
                            <input type="text" class="form-control" id="sedeNombre" name="nombre" required
                                   autocomplete="off"/>
                        </div>
                        <button type="submit" class="btn btn-primary submit-btn">Guardar cambios</button>
                    </form>
                </div>
            </div>
        </div>
    </div>















    <!--CREAR AREA-->
    <div class="modal fade" id="newAreaModal" tabindex="-1" aria-labelledby="newAreaModal"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <form action="/app/clasificadores/area/nuevo" method="POST" enctype="multipart/form-data">
                    <input type="hidden" name="id_sede">
                    <div class="modal-header">
                        <h1 class="modal-title fs-5" id="newAreaModalLabel">Nueva Clasificación de Área:</h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>

                    <div class="modal-body">
                        <div class="mb-3">
                            <label for="nombreArea" class="form-label">Nombre:</label>
                            <input type="text" class="form-control" id="nombreArea" name="nombre" required
                                   autocomplete="off">
                        </div>
                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                        <button type="submit" class="btn btn-primary submit-btn">Crear</button>
                    </div>
                </form>

            </div>
        </div>
    </div>

    <!--EDITAR AREA-->
    <div class="modal fade" id="areaModal" tabindex="-1" aria-labelledby="areaModalLabel"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="areaModalLabel">Editar Clasificación de Área:</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="areaForm" method="post">
                        <input type="hidden" name="id_sede">
                        <input type="hidden" id="areaId" name="id"/>
                        <div class="mb-3">
                            <label for="areaNombre" class="form-label">Nombre:</label>
                            <input type="text" class="form-control" id="areaNombre" name="nombre" required
                                   autocomplete="off"/>
                        </div>
                        <select class="form-select"  name="id_sedeEdit" style="margin-bottom:15px;">
                            <option value="" th:selected="${sedeSeleccionada == null or sedeSeleccionada == ''}" disabled>Seleccione una Sede</option>
                            <option th:each="sede : ${sedes}"
                                    th:value="${sede.id}"
                                    th:text="${sede.nombre}"
                                    th:selected="${sedeSeleccionada != null and sedeSeleccionada != '' and sede.id == T(java.lang.Long).valueOf(sedeSeleccionada)}">
                            </option>
                        </select>
                        <button type="submit" class="btn btn-primary submit-btn">Guardar cambios</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.querySelectorAll("form").forEach(form => {
            form.addEventListener("submit", function () {
                const sedeSeleccionada = document.getElementById("selectSede")?.value;
                const hiddenInput = form.querySelector('[name="id_sede"]');
                if (hiddenInput && sedeSeleccionada) {
                    hiddenInput.value = sedeSeleccionada;
                }
            });
        });
    </script>

    <script>
        window.addEventListener('DOMContentLoaded', () => {
            const path = window.location.pathname;
            const query = new URLSearchParams(window.location.search);
            const clasificador = query.get("clasificador");

            // Solo ejecutar si estamos en la página /admin/Clasificadores con clasificador=Incidencia
            if (path === "/admin/Clasificadores" && clasificador === "Incidencia") {
                const categoriaSelect = document.getElementById("selectCategoriaIncidencia");
                const subCategoriaSelect = document.getElementById("selectSubCategoriaIncidencia");

                const categoriaTexto = categoriaSelect.options[categoriaSelect.selectedIndex]?.text;
                const subCategoriaTexto = subCategoriaSelect.options[subCategoriaSelect.selectedIndex]?.text;

                if (categoriaTexto && categoriaTexto !== "Seleccione una categoría") {
                    document.getElementById("nombreNuevoSubCatIncidenciaEnModal").innerText = `(${categoriaTexto})`;
                    document.getElementById("categoriaSeleccionada").innerText = `(${categoriaTexto})`;
                }

                if (subCategoriaTexto && subCategoriaTexto !== "Seleccione una subcategoría") {
                    document.getElementById("nombreNuevoTipoIncidenciaEnModal").innerText = `(${subCategoriaTexto})`;
                    document.getElementById("subcategoriaSeleccionada").innerText = `(${subCategoriaTexto})`;
                }
            }
        });
    </script>
    <script>
        window.addEventListener('DOMContentLoaded', () => {
            const path = window.location.pathname;
            const query = new URLSearchParams(window.location.search);
            const clasificador = query.get("clasificador");

            // Ejecutar solo si estamos en la página con clasificador=Area
            if (path === "/admin/Clasificadores" && clasificador === "Area") {
                const sedeSelect = document.getElementById("selectSede");
                const sedeTexto = sedeSelect.options[sedeSelect.selectedIndex]?.text;

                if (sedeTexto && sedeTexto !== "Seleccione una Sede") {
                    document.getElementById("sedeSeleccionadaTexto").innerText = `(${sedeTexto})`;
                }
            }
        });
    </script>


    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Referencias a los selects principales
            const categoriaSelect = document.getElementById('selectCategoriaIncidencia');
            const subCategoriaSelect = document.getElementById('selectSubCategoriaIncidencia');

            // Inputs ocultos en los modales
            const inputCategoriaId = document.getElementById('inputCategoriaId');
            const inputSubCategoriaId = document.getElementById('inputSubCategoriaId');

            // Cuando se abre el modal de NUEVA SUBCATEGORÍA
            const newSubCatModal = document.getElementById('newSubCatIncidenciaModal');
            newSubCatModal.addEventListener('show.bs.modal', () => {
                inputCategoriaId.value = categoriaSelect.value;
            });

            // Cuando se abre el modal de NUEVO TIPO DE INCIDENCIA
            const newTipoModal = document.getElementById('newIncidenciaModal');
            newTipoModal.addEventListener('show.bs.modal', () => {
                inputSubCategoriaId.value = subCategoriaSelect.value;
            });
        });
    </script>


    <!--SweetAlert-->
    <script>
        function confirmAction(url, message) {
            Swal.fire({
                title: 'Confirmación',
                text: message,
                icon: 'warning',
                showCancelButton: true,
                confirmButtonText: 'Sí, continuar',
                cancelButtonText: 'Cancelar'
            }).then((result) => {
                if (result.isConfirmed) {
                    fetch(url, { method: 'GET' })
                        .then(response => {
                            if (!response.ok) throw new Error('Error en la solicitud');
                            return response.text(); // O response.json() si el backend lo devuelve así
                        })
                        .then(() => {
                            Swal.fire({
                                icon: 'success',
                                title: 'Operación completada',
                                showConfirmButton: false,
                                timer: 1000
                            });
                            setTimeout(() => location.reload(), 1000); // Da un segundo antes de recargar
                        })
                        .catch(error => {
                            console.error('Error en la operación:', error);
                            Swal.fire('Error', 'No se pudo completar la operación.', 'error');
                        });
                }
            });
            return false; // Evita que el enlace se abra directamente
        }
    </script>



</main>
<script src="/js/clasificadores.js"></script>
<div th:insert="~{common/imports :: bodyImportsAndNotification}">
</div>
<div th:insert="~{common/footer :: footer}">
</div>

</body>
</html>